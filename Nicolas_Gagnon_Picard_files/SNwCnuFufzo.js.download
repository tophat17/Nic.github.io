if (self.CavalryLogger) { CavalryLogger.start_js(["kce8l"]); }

__d("LitestandStreamTailStoryPlaceholderVisibilityTracker",["PageletEventConstsJS","PageletEventsHelper","onRectIsWithinViewport","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=null,i=null,j=!1,k={};a={setPlaceholderElement:function(a){j||(b("PageletEventsHelper").subscribeToPageletEvents(l),j=!0),g=a,h&&h.remove(),h=b("onRectIsWithinViewport")(function(){return a.getBoundingClientRect()},function(a){!i&&a&&(i=b("performanceAbsoluteNow")())})},getStoryPlaceholderVisibleDuration:function(a){return k[a]||0}};function l(a,c){__p&&__p();if(a.startsWith("hyperfeed_story")&&c===b("PageletEventConstsJS").DISPLAY_END){c=b("performanceAbsoluteNow")();k[a]=i?c-i:0;if(g){a=g.getBoundingClientRect().top;a=a-window.scrollTop;i=a<window.innerHeight&&a>0?c:null}else i=null}}e.exports=a}),null);
__d("NewsFeedTailLoadPlaceholderLoggerStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUCCESS:"success",FAILED:"failed",CANCELLED:"cancelled"})}),null);
__d("TailLoadLogger",["invariant","Arbiter","BigPipe","FBLogger","IntersectionObserver","NewsFeedTailLoadPlaceholderLoggerStatus","PageEvents","SubscriptionsHandler","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,b,c){this.$2=0,this.$3=0,this.$4=a,this.$4.setTailLoadPosition(c),this.$1=c,this.$5=b}h.prototype.getTailLoadPosition=function(){return this.$1};h.prototype.visibleStart=function(a){this.$3=a;return this};h.prototype.visibleEnd=function(a){if(this.$3>0){var c=a-this.$3;c>0&&(this.$2+=c,c>1e6&&b("FBLogger")(this.$5).warn("Logging a placeholder visible duration of over 1M! Duration: %s Start time: %s, End time: %s",this.$2,this.$3,a),this.$3=0)}return this};h.prototype.setDisplayDone=function(a){this.$4.setDisplayDone(Math.round(a));return this};h.prototype.setTailLoadStatus=function(a){this.$4.setTailLoadStatus(a);return this};h.prototype.log=function(){this.$4.setVisibleDuration(Math.round(this.$2)).log()};function a(a,c,d){this.$1={},this.$5={},this.$7=a,this.$4=d,this.$3=new(b("IntersectionObserver"))(function(a){return this.$8(a)}.bind(this),{threshold:c}),this.$6=new(b("SubscriptionsHandler"))(),this.$6.addSubscriptions(b("Arbiter").subscribe(b("BigPipe").Events.init,function(a,b){return this.$9(b)}.bind(this)))}a.prototype.createLogger=function(){g(0,undefined)};a.prototype.getStoryCount=function(){g(0,undefined)};a.prototype.setQPLEndMarker=function(a){};a.prototype.setQPLMarkerPoint=function(){};a.prototype.setQPLStartMarker=function(){};a.prototype.destroy=function(){this.$3.disconnect(),this.$6.release()};a.prototype.tailLoadStarted=function(){this.$2||(this.$3.observe(this.$4),this.$2=new h(this.createLogger(),this.$7,this.getStoryCount()))};a.prototype.tailLoadSuccessful=function(a){this.setQPLEndMarker("SUCCESS");var c=this.$2;c&&(c.visibleEnd(b("performanceNow")()).setTailLoadStatus(b("NewsFeedTailLoadPlaceholderLoggerStatus").SUCCESS),this.$1[a]=c,this.$10(a),this.$11())};a.prototype.tailLoadFailed=function(){this.setQPLEndMarker("FAIL");var a=this.$2;a&&(a.visibleEnd(b("performanceNow")()).setDisplayDone(-1).setTailLoadStatus(b("NewsFeedTailLoadPlaceholderLoggerStatus").FAILED).log(),this.$11())};a.prototype.tailLoadCancelled=function(){this.setQPLEndMarker("CANCEL");var a=this.$2;a&&(a.visibleEnd(b("performanceNow")()).setDisplayDone(-1).setTailLoadStatus(b("NewsFeedTailLoadPlaceholderLoggerStatus").CANCELLED).log(),this.$11())};a.prototype.$11=function(){this.$3.unobserve(this.$4),this.$2=null};a.prototype.$8=function(a){var b=this.$2;if(!b)return;var c=this.$3.thresholds,d=Array.isArray(c)&&c[0]||0;a.forEach(function(a){a.target===this.$4&&(a.intersectionRatio>d?b.visibleStart(a.time):(this.setQPLMarkerPoint(),b.visibleEnd(a.time)))}.bind(this))};a.prototype.$9=function(a){var c=a.arbiter;a=a.lid;var d={requestStart:0};this.$5[a]=d;c.subscribe(b("PageEvents").AJAXPIPE_SEND,function(a,b){a=b.ts;return d.requestStart=a});c.subscribe(b("BigPipe").Events.displayed,function(a,b){return this.$12(b)}.bind(this))};a.prototype.$12=function(a){var c=a.lid;a=a.ts;var d=this.$5[c];if(!d)return;var e=a-d.requestStart;e<=0&&b("FBLogger")(this.$7).warn("Tail load display done is invalid! Start: %s, Display Done: %s",d.requestStart,a);d.displayDone=e;this.$10(c)};a.prototype.$10=function(a){var b=this.$5[a],c=this.$1[a];b&&c&&b.displayDone!=null&&(b.displayDone>0&&c.setDisplayDone(b.displayDone).log(),delete this.$1[a],delete this.$5[a])};e.exports=a}),null);
__d("NewsFeedTailLoadControllerLegacy",["Arbiter","Bootloader","CSS","DOM","Event","FeedConsumptionController","FeedConsumptionRestorationLogger","FunnelLogger","LitestandMessages","LitestandStream","LitestandStreamTailStoryPlaceholderVisibilityTracker","MainThreadPerformanceLoggerActions","MainThreadPerformanceMonitor","NavigationMessage","NewsFeedDedupeStoryController","NewsFeedOffscreenController","NewsFeedTailLoadPlaceholderLogger","Run","SubscriptionsHandler","ge","getOrCreateDOMID","gkx","intersectionObserverEntryIsIntersecting","observeIntersection"],(function(a,b,c,d,e,f){__p&&__p();var g=3e4,h={"streamload.tail.commence":!0,"streamload.tail.success":!0,"streamload_error.tail":!0,"streamload_error.tail.transport":!0,"streamload_error.tail.final":!0,"streamload.tail.retry":!0,"streamload_error.tail.retry":!0,"streamload.tail.retry.success":!0,"streamload_timeout.tail":!0},i,j,k={},l=null,m="WWW_NEWSFEED_TAILLOAD_FUNNEL";a=b("gkx")("AT7KK82E6JxaPx6oN4q-Vm9lp3uNcTVJR1JkFm9kz7Exm8LU2NQ95JrEznfGXvNo3sy8c5nRChJELHsdh7syPA88o6lc41pGHRPG_OgO5q8hBw");var n=2,o=null,p=null,q,r=null,s,t=null,u=null,v=0,w=0,x=null,y=new(b("FeedConsumptionController"))(function(){return b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length});a&&(l=new(b("FeedConsumptionRestorationLogger"))(y));var z=function(a){a.forEach(function(a){h[a]&&b("FunnelLogger").appendActionWithTag(m,w,a,"try_"+v)}),b("Bootloader").loadModules(["BanzaiODS"],function(b){a.forEach(function(a){b.bumpEntityKey("feed_load",a)})},"NewsFeedTailLoadControllerLegacy")},A=function(a,c){b("Arbiter").inform(b("LitestandMessages").STREAM_LOAD_ERROR,c);c=["streamload_error.tail"];v>0&&c.push("streamload_error.tail.retry");a&&v<n?(v++,D(a),c.push("streamload.tail.retry"),b("Arbiter").inform(b("LitestandMessages").STREAM_LOAD_RETRY)):(u&&b("CSS").removeClass(u,"async_saving"),p&&p.tailLoadFailed(),y.error(),b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").TAIL_LOAD));z(c)},B=function(){C(),q=setTimeout(function(){z(["streamload_timeout.tail"])},g)},C=function(){q&&clearTimeout(q)},D=function(a){__p&&__p();v<1&&(b("FunnelLogger").startFunnel(m,w),b("FunnelLogger").addFunnelTag(m,w,"NewsFeedTailLoadController"));z(["streamload.tail.commence"]);k[a]&&(z(["duplicate_cursor"]),b("Arbiter").inform(b("LitestandMessages").DUPLICATE_CURSOR_ERROR,a));k[a]=!0;var c={client_stories_count:b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length,cursor:a,pager_config:s,scroll_count:w+1,story_id:b("LitestandStream").getStoryID()},d=function(b){A(a,b)},e=function(b){z(["streamload_error.tail.transport"]),A(a,b)},f=function(a){a.error?z(["streamload_error.tail.final"]):(z(["streamload.tail.success"]),w++)};!r?b("Bootloader").loadModules(["UIPagelet"],function(a){r=a.loadFromEndpoint("LitestandTailLoadPagelet",b("getOrCreateDOMID")(i),c,{append:!0,automatic:!0,constHeight:!0,crossPage:!0,errorHandler:d,finallyHandler:f,transportErrorHandler:e,usePipe:!0}),b("Arbiter").inform(b("LitestandMessages").STORIES_REQUESTED)},"NewsFeedTailLoadControllerLegacy"):(r.setErrorHandler(d).setTransportErrorHandler(e).go(c),b("Arbiter").inform(b("LitestandMessages").STORIES_REQUESTED))};function E(){x&&x.release(),x=null,p&&p.tailLoadCancelled(),p&&p.destroy(),p=null,y.cancel(),y.destroy(),l&&l.destroy(),k={},r=null,w=0,C()}function F(){u&&b("CSS").addClass(u,"async_saving"),D(j),y.start(),p&&p.tailLoadStarted(),b("MainThreadPerformanceMonitor").start(b("MainThreadPerformanceLoggerActions").TAIL_LOAD)}function G(event){F(),event.preventDefault()}function H(a){o&&o.remove();o=b("observeIntersection")(a,function(a){a=b("intersectionObserverEntryIsIntersecting")(a);a&&(F(),o&&(o.remove(),o=null))},{rootMargin:"0px 0px "+((a=(a=t)==null?void 0:a.bufferPixels)!=null?a:0)+"px 0px"});return o}c={init:function(a,c,d,e,f,g){i=d,j=a,u=c,s=e,t=f,x=new(b("SubscriptionsHandler"))(),b("LitestandStreamTailStoryPlaceholderVisibilityTracker").setPlaceholderElement(u),x.addSubscriptions(H(u),b("Arbiter").subscribe(b("LitestandMessages").STORIES_REQUESTED,B),b("Arbiter").subscribe([b("LitestandMessages").STORIES_INSERTED,b("LitestandMessages").STREAM_LOAD_ERROR],C),b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,E),b("Event").listen(u,"click",G),b("Run").onLeave(E),b("Run").onUnload(function(){return p&&p.tailLoadCancelled()})),y.setPlaceholder(u),l&&l.reset(),g!=null&&(p=new(b("NewsFeedTailLoadPlaceholderLogger"))(g,u))},destroy:function(){E(),u&&b("CSS").hide(u)},tailloadCompleted:function(a,c){var d=b("LitestandStream").getStreamRoot();d&&b("NewsFeedDedupeStoryController").dedupe(d,b("LitestandStream").getStoriesSelector());u&&b("CSS").removeClass(u,"async_saving");j=a;u&&H(u);v=0;p&&p.tailLoadSuccessful(c);y.complete();b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").TAIL_LOAD)},setPagerConfig:function(a){s=a},moreStoriesInserted:function(a){b("Arbiter").inform(b("LitestandMessages").STORIES_INSERTED,{substream_id:a});a=b("ge")(a);a&&(b("NewsFeedOffscreenController").attachSubstream(a),v>0&&(v=0,z(["streamload.tail.retry.success"])))},handleErrorV2:function(a){A(a)}};e.exports=c}),null);
__d("FBStoriesQPLUtils",["QuickPerformanceLogger","Run"],(function(a,b,c,d,e,f){"use strict";function g(a){a.navigationStart?b("QuickPerformanceLogger").markerStartFromNavStart(a.qplMarker):b("QuickPerformanceLogger").markerStart(a.qplMarker,0),b("Run").onUnload(function(){b("QuickPerformanceLogger").markerEnd(a.qplMarker,"CANCEL")})}a={start:function(a){g(a)},end:function(a){b("QuickPerformanceLogger").markerEnd(a.qplMarker,a.action?a.action:"SUCCESS")}};e.exports=a}),null);
__d("GHLDebug",["emptyFunction","gkx"],(function(a,b,c,d,e,f){"use strict";var g=[];a=b("gkx")("AT6jG-GSz_gaUVDoLFRU946R_EE4Y9HnShFpToAFR1lK0WPDOcoYtoIzpKJev6R3FBwZ1BZb_kUSmPmwKRaDQJ9e")?function(a,b,c,d,e){g.push([a.toString(),b,c,d,e.toString()])}:b("emptyFunction");c=b("gkx")("AT6jG-GSz_gaUVDoLFRU946R_EE4Y9HnShFpToAFR1lK0WPDOcoYtoIzpKJev6R3FBwZ1BZb_kUSmPmwKRaDQJ9e")?function(){return g}:b("emptyFunction");e.exports={hoot:a,murmur:c}}),null);
__d("GHLSurvey",["AdblockerDetectionRetryConfig","AdDelayedHiddenCheckConfiguration","Banzai","DateTime","ErrorUtils","FBLogger","GHLDebug","GHLTestElement","Run","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="swank",h=0,i=4,j=6,k=8,l=9,m=10,n=11;a={check:function(a,c,d){var e=function(){p(a,c,d,0,0)};b("Run").onAfterLoad(o(e,"initial"))}};var o=function(a,c){return function(){b("ErrorUtils").applyWithGuard(a,null,null,null,"GHL:guard:"+c)}},p=function a(c,d,e,f,h){__p&&__p();h=Array.from(c.querySelectorAll("img"));if(h.length===0&&d.startsWith("7.")){var i=f+1;if(i<5){f=function(){a(c,d,e,i,0)};setTimeout(o(f,"pagelet-check"),2500)}else b("Banzai").post("xtrackable:"+g,{token:d,event_code:e?l:m});return}if(h.length===0){f=d.startsWith("2.");f||b("FBLogger")("GHL").warn("Expected to find images. (Token: %s)",d);return}q(c,d,e,0,!1)},q=function(a,c,d,e,f){__p&&__p();var l=!1;!f&&d&&b("gkx")("AT4Ww_sJlWAOKtBvOvHgkh6Mk-KRppEb5Tyz5HOO5rdUTmq8qddDOA3lwvMEYK7MLB8nJFkBIlg8szgk52o43zVWdZvA-nYa4bMhVAy8IeQreg")&&(l=b("GHLTestElement").testElementD(a),l&&(b("Banzai").post("xtrackable:"+g,{token:c,event_code:n,hidden_delay:e*t(d)}),b("GHLDebug").hoot(n,b("DateTime").localNow(),c,a.id,e*t(d))));var m=b("GHLTestElement").testElementI(a);if(!m){r(a,c,d,e,f||l);return}d&&u();if(e>0){m=d?i:k;b("Banzai").post("xtrackable:"+g,{token:c,event_code:m,hidden_delay:e*t(d)});b("GHLDebug").hoot(m,b("DateTime").localNow(),c,a.id,e*t(d));return}f=d?h:j;b("Banzai").post("xtrackable:"+g,{token:c,event_code:f});b("GHLDebug").hoot(f,b("DateTime").localNow(),c,a.id,0)},r=function(a,b,c,d,e){var f=d+1;if(f>=s(c))return;d=function(){q(a,b,c,f,e)};var g=t(c);setTimeout(o(d,"hidden-check"),g)},s=function(a){return a?b("AdblockerDetectionRetryConfig").retry_count:b("AdblockerDetectionRetryConfig").organic_retry_count},t=function(a){return a?b("AdblockerDetectionRetryConfig").retry_interval:b("AdblockerDetectionRetryConfig").organic_retry_interval},u=function(){return b("AdDelayedHiddenCheckConfiguration").setEnabled(!0)};e.exports=a}),null);