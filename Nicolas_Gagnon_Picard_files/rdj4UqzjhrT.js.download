if (self.CavalryLogger) { CavalryLogger.start_js(["vJTTt"]); }

__d("SubscriptionLevels",[],(function(a,b,c,d,e,f){a=Object.freeze({ALL:"162318810514679",DEFAULT:"271670892858696",TOP:"266156873403755"});e.exports=a}),null);
__d("EditSubscriptions",["csx","Arbiter","AsyncRequest","CSS","DOM","Event","FeedBlacklistButton","MenuDeprecated","Parent","SubscriptionLevels","ge","getOrCreateDOMID"],(function(a,b,c,d,e,f,g){__p&&__p();var h=45,i=[b("SubscriptionLevels").ALL,b("SubscriptionLevels").DEFAULT,b("SubscriptionLevels").TOP],j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u="/ajax/follow/follow_profile.php",v="/ajax/follow/unfollow_profile.php",w="/ajax/settings/notifications/notify_me.php",x={},y={},z={},A=null,B={};function C(a){return i.includes(a)}function D(a,c,d,e){__p&&__p();e=b("Parent").byClass(e,"uiMenuItem")||b("Parent").bySelector(e,"._54ni");var f=b("getOrCreateDOMID")(a);if(!e||!b("DOM").contains(a,e))return;else if(b("CSS").hasClass(e,"SubscribeMenuSubscribeCheckbox")){l[c]?I(f,c):H(f,c);return!1}else if(b("CSS").hasClass(e,"SubscribeMenuUnsubscribe")){I(f,c);return!1}else if(b("CSS").hasClass(e,"SubscribeMenuSettingsItem")){U(a,!0);return!1}else if(b("CSS").hasClass(e,"SubscriptionMenuGoBack")){U(a,!1);return!1}else if(b("CSS").hasClass(e,"SubscriptionMenuItem")){F(a,c,d,e);return!1}else if(b("CSS").hasClass(e,"SubscribeMenuNotifyMeCheckbox")){E(a,c);return!1}}function E(a,b){m[b]?Y(a,b):X(a,b)}function F(a,c,d,e){if(b("CSS").hasClass(e,"SubscriptionMenuLevel")){if(b("MenuDeprecated").isItemChecked(e))return;S(a,c,L(e),!0,d)}else b("CSS").hasClass(e,"SubscriptionMenuCategory")?P(c,e,!b("MenuDeprecated").isItemChecked(e),!0,d):b("CSS").hasClass(e,"SubscriptionAppStory")&&R(c,e,!b("MenuDeprecated").isItemChecked(e),d)}function G(a){return B[a]?B[a]:0}function H(a,c){var d={profile_id:c};b("Arbiter").inform("FollowingUser",d);b("Arbiter").inform(b("FeedBlacklistButton").UNBLACKLIST,d);new(b("AsyncRequest"))().setURI(u).setMethod("POST").setData({profile_id:c,location:G(a)}).setErrorHandler(b("Arbiter").inform.bind(null,"FollowUserFail",d)).send()}function I(a,c){var d={profile_id:c};b("Arbiter").inform("UnfollowingUser",d);b("Arbiter").inform(b("FeedBlacklistButton").BLACKLIST,d);new(b("AsyncRequest"))().setURI(v).setMethod("POST").setData({profile_id:c,location:G(a)}).setErrorHandler(b("Arbiter").inform.bind(null,"UnfollowUserFail",d)).send()}function J(a,c,d){c={profile_id:a,level:q[a],custom_categories:r[a],location:d};new(b("AsyncRequest"))().setURI("/ajax/follow/manage_subscriptions.php").setData(c).send()}function K(a,c){__p&&__p();var d=r[c]||[],e=b("MenuDeprecated").getItems(a);e.forEach(function(a){if(b("CSS").hasClass(a,"SubscriptionMenuCategory")){var e=L(a);d.includes(e)?N(a):O(a)}else if(b("CSS").hasClass(a,"SubscriptionAppStory")){e=L(a);z[c]&&z[c][e]?N(a):O(a)}});S(a,c,q[c],!1)}function L(a){a=b("DOM").scry(a,"input")[0];return a&&a.value}function M(a){return b("DOM").find(a,"a.itemAnchor")}function N(a){b("CSS").addClass(a,"checked"),M(a).setAttribute("aria-checked",!0)}function O(a){b("CSS").removeClass(a,"checked"),M(a).setAttribute("aria-checked",!1)}function P(a,b,c,d,e){__p&&__p();c?N(b):O(b);b=L(b);if(C(b))c&&Q(a,b);else if(c)r[a].includes(b)||r[a].push(b);else{c=r[a].indexOf(b);c!==-1&&r[a].splice(c,1)}d&&J(a,b,e)}function Q(a,c){q[a]=c,b("Arbiter").inform("SubscriptionLevelUpdated",{profile_id:a,level:c})}function R(a,c,d,e){e="/ajax/feed/filter_action/";var f=L(c),g={actor_id:a,app_id:f};d?(N(c),e+="resubscribe_user_app/",g.action="resubscribe_user_app",z[a]||(z[a]={}),z[a][f]=!0):(O(c),e+="unsubscribe_user_app_checkbox/",g.action="unsubscribe_user_app_checkbox",z[a]&&(z[a][f]=!1));new(b("AsyncRequest"))().setURI(e).setData(g).send()}function S(a,c,d,e,f){a=b("DOM").scry(a,".SubscriptionMenuLevel");var g=null;a.forEach(function(a){L(a)==d?g=a:b("MenuDeprecated").isItemChecked(a)&&P(c,a,!1,!1)});g&&P(c,g,!0,e,f)}function T(a,c,d){l[c]=d;b("CSS").conditionClass(a,"isUnsubscribed",!d);c=b("DOM").scry(a,"li.SubscribeMenuSubscribeCheckbox");if(c.length!==0){a=c[0];d?N(a):O(a)}}function U(a,c){b("CSS").conditionClass(a,"subscriptionMenuOpen",c)}function V(a,c,d){c=b("DOM").find(a,".FriendListSubscriptionsMenu");var e=b("DOM").find(c,".uiMenuInner");A!=null&&A.forEach(function(a){e.removeChild(a)});d.forEach(function(a){e.appendChild(a)});A=d}b("Arbiter").subscribe("UnfollowUser",function(a,b){s[b.profile_id]&&(Q(b.profile_id,s[b.profile_id]),r[b.profile_id]=t[b.profile_id].slice())});b("Arbiter").subscribe("UpdateSubscriptionLevel",function(a,c){a=c.profile_id+"";c=c.level+"";Q(a,c);var d;for(d in j)if(j[d]===a){var e=b("ge")(d);e&&S(e,a,c,!1)}});b("Arbiter").subscribe("listeditor/close_editor",function(){var a;for(a in j){var c=b("ge")(a);c&&U(c,!1)}});function W(a,c,d){__p&&__p();m[c]=d;c=y[c];if(c){d?c.select():c.deselect();return}c=b("DOM").scry(a,"li.SubscribeMenuNotifyMeCheckbox");if(c.length!==0){c=c[0];b("CSS").conditionShow(c,!0);a=b("DOM").scry(a,"li.SubscribeMenuNotifyMeCheckboxSeparator");a.length>0&&b("CSS").conditionShow(a[0],!0);d?N(c):O(c)}}function X(a,c){a={profile_id:c};b("Arbiter").inform("EnableNotifsForUser",a);new(b("AsyncRequest"))().setURI(w).setMethod("POST").setData({notifier_id:c,enable:!0}).setErrorHandler(b("Arbiter").inform.bind(null,"EnableNotifsForUserFail",a)).send()}function Y(a,c){a={profile_id:c};b("Arbiter").inform("DisableNotifsForUser",a);new(b("AsyncRequest"))().setURI(w).setMethod("POST").setData({notifier_id:c,enable:!1}).setErrorHandler(b("Arbiter").inform.bind(null,"DisableNotifsForUserFail",a)).send()}c={init:function(a,c,d){__p&&__p();var e=b("getOrCreateDOMID")(a);B[e]=d;j[e]||b("Event").listen(a,"click",function(b){return D(a,j[e],d,b.getTarget())});d===h&&x[c].length&&V(a,c,x[c]);q[c]&&K(a,c);j[e]=c;b("CSS").conditionClass(a,"NonFriendSubscriptionMenu",!k[c]);b("CSS").conditionClass(a,"cannotSubscribe",!n[c]);b("CSS").conditionClass(a,"noSubscriptionLevels",o[c]&&!p[c]);b("CSS").conditionClass(a,"noSubscribeCheckbox",!k[c]&&!o[c]);T(a,c,l[c]);W(a,c,m[c]);b("Arbiter").subscribe(["FollowUser","FollowingUser","UnfollowUserFail"],function(b,d){d.profile_id==c&&T(a,c,!0)}.bind(this));b("Arbiter").subscribe(["UnfollowUser","UnfollowingUser","FollowUserFail"],function(d,e){e.profile_id==c&&(b("Arbiter").inform("SubMenu/Reset"),T(a,c,!1))}.bind(this));b("Arbiter").subscribe(["EnableNotifsForUser","DisableNotifsForUserFail"],function(b,d){d.profile_id==c&&W(a,c,!0)}.bind(this));b("Arbiter").subscribe(["DisableNotifsForUser","EnableNotifsForUserFail"],function(b,d){d.profile_id==c&&W(a,c,!1)}.bind(this));b("Arbiter").subscribe("listeditor/friend_lists_changed",function(b,c){if(c.notify_state){b=c.added_uid?c.added_uid:c.removed_uid;W(a,b,c.notify_state.is_notified)}}.bind(this))},getSubscriptions:function(a){return{level:q[a],custom_categories:r[a]}},registerTimelineNotifySelector:function(a,c){var d=a.getInitialMenu(),e=a.getContentRoot();d.forEachItem(function(a){var d=a.getRoot();b("CSS").hasClass(d,"SubscribeMenuNotifyMeCheckbox")&&(y[c]=a,W(e,c,m[c]))});d.subscribe("itemclick",function(a,b){b.item===y[c]&&E(e,c);return!0})},toggleNotificationsOnJoin:function(a,b){m[a]!==b&&E(null,a)},setSubscriptions:function(a,b,c,d,e,f,g,h,i,j,q,u){Q(a,g+""),k[a]=b,l[a]=c,n[a]=d,o[a]=e,p[a]=f,s[a]=i+"",r[a]=h.map(String),t[a]=j.map(String),x[a]=u,m[a]=q}};e.exports=a.EditSubscriptions||c}),null);
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],(function(a,b,c,d,e,f){a.SubscriptionLevels=b("SubscriptionLevels"),a.EditSubscriptions=b("EditSubscriptions")}),3);
__d("FollowLink",["Arbiter","CSS","ge"],(function(a,b,c,d,e,f){a={subscribeEvents:function(a,c,d){b("Arbiter").subscribe(["FollowUser","UnfollowUser"],function(event,e){if(e.profile_id!=a)return;e=b("ge")(c);var f=b("ge")(d),g=event=="FollowUser";e&&b("CSS").conditionShow(e,!g);f&&b("CSS").conditionShow(f,g)})}};e.exports=a}),null);
__d("DynamicFriendListEducation",["Arbiter","AsyncRequest","Dialog","Event","PageTransitionsRegistrar","createArrayFromMixed","removeFromArray"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i,j,k,l;function m(){i&&i.hide(),j&&j.hide()}function n(a){b("removeFromArray")(h,a),m(),k({accept_tag_education:!0})}function o(){m(),k({nux_cancel:!0})}a={init:function(a,c){g=a,h=b("createArrayFromMixed")(c).map(String),b("PageTransitionsRegistrar").registerHandler(function(){m(),g=!1,k=undefined,h=[]})},showDialog:function(a,c,d){g&&h.includes(a)?(m(),b("Arbiter").inform("DynamicFriendListEducation/dialogOpen",{uid:c,flid:a}),k=d,i=new(b("Dialog"))().setAsync(new(b("AsyncRequest"))("/ajax/friends/lists/smart_list_education.php").setMethod("GET").setData({flid:a,uid:c}).setReadOnly(!0)).setHandler(n.bind(this,a)).setCloseHandler(function(){b("Arbiter").inform("DynamicFriendListEducation/dialogClosed",{uid:c,flid:a})}).setCancelHandler(function(){b("Arbiter").inform("DynamicFriendListEducation/dialogCancel",{uid:c,flid:a})}).show()):d()},showContextualDialog:function(a,c,d,e){g&&h.includes(a)?(m(),l=d,k=e,new(b("AsyncRequest"))("/ajax/friends/lists/smart_list_contextual_education.php").setMethod("GET").setData({flid:a,uid:c}).setReadOnly(!0).send()):e()},setContextualDialog:function(a,c,d,e){j=a,j.setContext(l),j.show(),b("Event").listen(c,"click",n.bind(this,e)),b("Event").listen(d,"click",o)}};e.exports=a}),null);
__d("FriendStatus",["Arbiter","AsyncRequest","SubscribeButton","createArrayFromMixed","forEachObject"],(function(a,b,c,d,e,f){__p&&__p();function g(a,b){"use strict";this.lists=null,this.id=a,this.update(b)}g.prototype.update=function(a,c){"use strict";a&&(this.status=a),c&&(this.lists=b("createArrayFromMixed")(c).map(String),this.$1())};g.prototype.isComplete=function(){"use strict";return!!this.lists};g.prototype.addToList=function(a){"use strict";this.lists&&!this.lists.includes(a)&&this.lists.push(a),this.$1()};g.prototype.removeFromList=function(a){"use strict";if(this.lists){a=this.lists.indexOf(a);a!==-1&&this.lists&&this.lists.splice(a,1)}this.$1()};g.prototype.updateList=function(a,b){"use strict";b?this.addToList(a):this.removeFromList(a)};g.prototype.$1=function(){"use strict";b("Arbiter").inform("FriendListMembershipChange",{uid:this.id,lists:this.lists})};g.getFriend=function(a,c){"use strict";h[a]&&h[a].isComplete()?c(h[a]):i[a]?i[a].push(c):(i[a]=[c],new(b("AsyncRequest"))().setURI("/ajax/friends/status.php").setData({friend:a}).setHandler(function(b){b=b.getPayload();setTimeout(g.initFriend.bind(g,a,b.status,b.lists),0)}).send())};g.initFriend=function(a,b,c){"use strict";var d=h[a]||new g(a);d.update(d.status||b,d.lists||c);h[a]=d;i[a]&&i[a].forEach(function(a){a(d)});i[a]=null};g.setSpecialLists=function(a){"use strict";var c=g.CLOSE_FRIENDS===null;g.CLOSE_FRIENDS=a.close+"";g.ACQUAINTANCES=a.acq+"";c&&b("forEachObject")(h,function(a,b){a.$1()})};g.ARE_FRIENDS=1;g.INCOMING_REQUEST=2;g.OUTGOING_REQUEST=3;g.CAN_REQUEST=4;g.CLOSE_FRIENDS=null;g.ACQUAINTANCES=null;var h={},i={};function a(a,c,d){!h[d.uid]?h[d.uid]=new g(d.uid,a):h[d.uid].update(a),b("Arbiter").inform("FriendRequest/change",{uid:d.uid,status:a})}b("Arbiter").subscribe(["FriendRequest/cancel","FriendRequest/unfriend"],function(a,c){c.profile_id=c.uid,c.connected=!1,b("Arbiter").inform(b("SubscribeButton").UNSUBSCRIBED,c)});b("Arbiter").subscribe(["FriendRequest/cancel","FriendRequest/unfriend","FriendRequest/sendFail"],a.bind(null,g.CAN_REQUEST));b("Arbiter").subscribe(["FriendRequest/confirmFail"],a.bind(null,g.INCOMING_REQUEST));b("Arbiter").subscribe(["FriendRequest/cancelFail","FriendRequest/sent","FriendRequest/sending"],a.bind(null,g.OUTGOING_REQUEST));b("Arbiter").subscribe(["FriendRequest/confirm","FriendRequest/confirming"],a.bind(null,g.ARE_FRIENDS));e.exports=g}),null);
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=5,h={},i="/ajax/profile/removefriendconfirm.php",j="/ajax/friends/requests/cancel.php",k="/ajax/choose/",l="/profile.php",m,n,o,p,q={profile_browser:43,fbx_top_bar:1,hovercard:5};function r(a,c,d){__p&&__p();var e=h[a.id],f=function(f){var g={action:d?"add_list":"del_list",to_friend:e.id,friendlists:[c],source:m};f&&Object.assign(g,f);e.updateList(c,d);d&&c==b("FriendStatus").CLOSE_FRIENDS?(f=u(a,b("FriendStatus").ACQUAINTANCES),b("MenuDeprecated").isItemChecked(f)&&(b("MenuDeprecated").toggleItem(f),r(a,b("FriendStatus").ACQUAINTANCES,!1))):d&&c==b("FriendStatus").ACQUAINTANCES&&(f=u(a,b("FriendStatus").CLOSE_FRIENDS),b("MenuDeprecated").isItemChecked(f)&&(b("MenuDeprecated").toggleItem(f),r(a,b("FriendStatus").CLOSE_FRIENDS,!1)));f={flid:c,uid:e.id};var h=d?"FriendListHovercard/add":"FriendListHovercard/remove";b("Arbiter").inform(h,f);new(b("AsyncRequest"))().setURI("/ajax/add_friend/action.php").setData(g).send()};d?b("DynamicFriendListEducation").showDialog(c,e.id,f):f()}function s(a){a=b("DOMQuery").scry(a,"input")[0];return a&&a.value}function t(a,c,d){if(b("CSS").hasClass(d,"async_saving"))return;var e={uid:c.id};new(b("AsyncRequest"))().setURI(j).setMethod("POST").setData({friend:c.id,cancel_ref:o,floc:p}).setHandler(function(){return b("Arbiter").inform("FriendRequest/cancel",e)}).setErrorHandler(function(){return b("Arbiter").inform("FriendRequest/cancelFail",e)}).setStatusElement(d).send()}function u(a,c){a=b("MenuDeprecated").getItems(a);for(var d=0;d<a.length;d++)if(s(a[d])==c)return a[d];return null}function v(a,c){a=b("MenuDeprecated").getItems(a);a.forEach(function(a){var d=s(a);d=c.lists.includes(d);b("MenuDeprecated").isItemChecked(a)!==d&&b("MenuDeprecated").toggleItem(a)})}function w(a){__p&&__p();var c=b("MenuDeprecated").getItems(a),d=!b("CSS").hasClass(a,"followButtonFlyout")&&!b("CSS").hasClass(a,"likeButtonFlyout"),e=[],f=[],h=0,i=0;c.forEach(function(a){b("CSS").hasClass(a,"neverHide")?(b("CSS").removeClass(a,"underShowMore"),h++):b("MenuDeprecated").isItemChecked(a)?e.push(a):b("CSS").hasClass(a,"neverShow")||b("CSS").hasClass(a,"FriendListCreateTrigger")||!d&&b("CSS").hasClass(a,"friendOptionsOnly")?(b("CSS").addClass(a,"underShowMore"),i++):f.push(a)});var j=g-h;c=e.concat(f);var k=i;c.forEach(function(a){if(b("CSS").hasClass(a,"ShowMoreItem")){j--;return}j?(b("CSS").removeClass(a,"underShowMore"),j--):(b("CSS").addClass(a,"underShowMore"),k=!0)});b("CSS").conditionClass(a,"hasMoreFriendListItems",k);c=b("DOMQuery").scry(a,".FriendListMenuShowMore");c.forEach(function(a){b("CSS").removeClass(a,"FriendListMenuShowMore")})}function x(a,c){b("CSS").conditionClass(a,"FriendListMemorializedUser",c)}function y(a,c){b("CSS").conditionClass(a,"FriendListCannotSuggestFriends",!c)}function z(a,c){__p&&__p();var d=b("DOMQuery").scry(a,".FriendListUnfriend")[0],e=b("DOMQuery").scry(a,".FriendListCancel")[0],f=b("DOMQuery").scry(a,".FriendListSuggestFriends")[0],g=b("DOMQuery").scry(a,".FriendListFriendship")[0];e&&b("CSS").conditionShow(e,c.status==b("FriendStatus").OUTGOING_REQUEST);if(d){b("CSS").conditionShow(d,c.id!==undefined&&c.status===b("FriendStatus").ARE_FRIENDS);d=b("DOMQuery").find(d,"a");d.setAttribute("ajaxify",new(b("URI"))(i).addQueryData({uid:c.id,unref:n,floc:p}).toString())}else b("CSS").conditionClass(a,"NoFriendListActionSeparator",!e||c.status!=b("FriendStatus").OUTGOING_REQUEST);f&&b("DOMQuery").find(f,"a").setAttribute("href",new(b("URI"))(k).addQueryData({type:"suggest_friends",newcomer:c.id,ref:"profile_others_dropdown"}).toString());g&&(b("CSS").conditionShow(g,c.status==b("FriendStatus").ARE_FRIENDS),b("DOMQuery").find(g,"a").setAttribute("href",new(b("URI"))(l).addQueryData({and:c.id}).toString()))}function A(a,c,d){var e=b("DOMQuery").scry(a,"div.FriendListSubscriptionsMenu");e.length!==0&&b("EditSubscriptions").init(a,c,d)}b("Arbiter").subscribe("FriendRequest/change",function(a,c){for(var d in h){a=b("ge")(d);var e=h[d];a&&e&&e.id==c.uid&&(v(a,e),z(a,e),w(a))}});b("MenuDeprecated").subscribe("select",function(a,c){b("CSS").hasClass(c.item,"ShowMoreItem")&&b("CSS").hasClass(c.menu,"FriendListMenu")&&(b("CSS").addClass(c.menu,"FriendListMenuShowMore"),b("ScrollableArea").poke(c.item))});c={init:function(a,c,d,e,f,g,i,j){__p&&__p();a=b("$")(a);m=d;n=g;o=i;p=j;var k=q[d]||45;h[a.id]||b("MenuDeprecated").subscribe("select",function(c,d){if(b("DOMQuery").contains(a,d.item))if(b("Parent").byClass(d.item,"FriendListItem")){b("MenuDeprecated").toggleItem(d.item);c=s(d.item);r(a,c,b("MenuDeprecated").isItemChecked(d.item))}else b("Parent").byClass(d.item,"FriendListCancel")?t(a,h[a.id],d.item):b("Parent").byClass(d.item,"FriendListUnfriend")&&b("Arbiter").inform("FriendEditLists/unfriend")});b("CSS").addClass(a,"async_saving");b("FriendStatus").getFriend(c,function(d){x(a,e),y(a,f),v(a,d),z(a,d),h[a.id]=d,w(a),A(a,c,k),b("CSS").removeClass(a,"async_saving")}.bind(this))}};e.exports=a.FriendEditLists||c}),null);
__d("FriendListFlyoutController",["csx","cx","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","DOM","DOMQuery","Event","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent_DEPRECATED","emptyFunction","getActiveElement","ifRequired"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j,k,l=null,m=null,n,o,p,q,r,s,t=1500,u,v=!1,w=["uiButtonConfirm","uiButtonSpecial","_42gz","_42g-","_4jy2","_51tl","_4jy1"],x={init:function(a,c){__p&&__p();x.init=b("emptyFunction");i=a;i.subscribe("mouseenter",G);i.subscribe("mouseleave",function(){v||W()});i.subscribe("hide",I);i.enableBehavior(b("LayerTabIsolation"));i.enableBehavior(b("LayerHideOnEscape"));u=c;l&&b("DOM").setContent(i.getContent(),[l,m]);a=function(a){a=b("Parent").byClass(a.getTarget(),"enableFriendListFlyout");a?(v=!0,n!==a&&(k&&Y(),V(a))):v&&Y()};c=function(a){a=b("Parent").byClass(a.getTarget(),"enableFriendListFlyout");a&&(n===a?clearTimeout(q):(k&&Y(),V(a)))};b("Event").listen(document.documentElement,{click:a,mouseover:c,keydown:function(event){__p&&__p();var a=event.getTarget();if(event.getModifiers().any)return;if(!k||b("DOMQuery").isNodeOfType(a,["input","textarea"]))return;var c=b("Event").getKeyCode(event),d;switch(c){case b("Keys").UP:case b("Keys").DOWN:var e=F();d=D(e);B(e[d+(c===b("Keys").UP?-1:1)]);return!1;case b("Keys").SPACE:e=C(a);e&&(y(e),event.prevent());break;default:a=String.fromCharCode(c).toLowerCase();e=F();d=D(e);c=d;var f=e.length;while((c=++c%f)!==d){var g=b("MenuDeprecated").getItemLabel(e[c]);if(g&&g.charAt(0).toLowerCase()===a){B(e[c]);return!1}}}}});b("Arbiter").subscribe("FriendEditLists/unfriend",Y);b("Arbiter").subscribe("FriendRequest/cancel",Y);b("Arbiter").subscribe("DynamicFriendListEducation/dialogOpen",function(){s=!0});b("Arbiter").subscribe("DynamicFriendListEducation/dialogClosed",function(){s=!1,W()})},initContent:function(a){b("DOM").appendContent(document.body,a),J(a),setTimeout(function(){!l?(l=a,i&&b("DOM").setContent(i.getContent(),[l,m]),b("CSS").show(l),b("Event").listen(l,"click",Z),k&&S(n)):(b("DOM").remove(a),a=null)},0)},initNux:function(a){if(m)return;m=a;i&&b("DOM").setContent(i.getContent(),[l,m])},show:function(a){T(a)},hide:function(a){a===!1?Y():W()},setActiveNode:function(a){k&&Y(),n=a,o=b("Event").listen(a,"mouseleave",function(){n=null,o&&o.remove()})},setCloseListener:function(a,c){b("DataStore").set(a,"flfcloselistener",c),n!=a&&b("DataStore").set(a,"flfcloselistenertimeout",setTimeout($.bind(null,a),t))},setCloseListenerTimeout:function(a){t=a}};function y(a){b("UserAgent_DEPRECATED").firefox()&&A(a).blur(),b("MenuDeprecated").inform("select",{menu:z(a),item:a})}function z(a){return b("CSS").hasClass(a,"uiMenuContainer")?a:b("Parent").byClass(a,"uiMenu")}function A(a){return b("DOMQuery").find(a,"a.itemAnchor")}function B(a){a&&E(a)&&(b("MenuDeprecated")._removeSelected(i.getContent()),b("CSS").addClass(a,"selected"),A(a).focus())}function C(a){return b("Parent").byClass(a,"uiMenuItem")}function D(a){var c=b("getActiveElement")();if(c){c=C(c);return a.indexOf(c)}return-1}function E(a){return!b("CSS").hasClass(a,"disabled")&&b("Style").get(a,"display")!=="none"&&b("Style").get(b("Parent").byClass(a,"uiMenu"),"display")!=="none"}function F(){return b("MenuDeprecated").getItems(i.getContent()).filter(E)}function G(){clearTimeout(q)}function H(a){for(var c=0;c<w.length;c++)if(b("CSS").hasClass(a,w[c]))return!1;return!0}function I(){__p&&__p();if(n){H(n)&&(b("CSS").removeClass(n,"_52nd"),(b("CSS").hasClass(n,"uiButton")||b("CSS").matchesSelector(n,"._42fu"))&&b("CSS").removeClass(n,"selected"));if(b("DataStore").get(n,"flfcloselistener")){var a=n;b("DataStore").set(n,"flfcloselistenertimeout",setTimeout($.bind(null,a),t))}}k=!1;R();n=null}function J(a){a=b("DOMQuery").scry(a,'[tabindex="0"]');a.forEach(function(a){a.tabIndex="-1"});a[0]&&(a[0].tabIndex="0")}function K(a){b("DOMQuery").isNodeOfType(a,"label")&&b("CSS").hasClass(a,"uiButton")&&(a=b("Button").getInputElement(a));return a}function L(a){return b("DataStore").get(K(a),"profileid")}function M(a){return b("DataStore").get(K(a),"memorialized")==="true"}function N(a){return b("DataStore").get(K(a),"cansuggestfriends")==="true"}function O(a){return b("DataStore").get(K(a),"unref")}function P(a){return b("DataStore").get(K(a),"cancelref")}function Q(a){return b("DataStore").get(K(a),"floc")}function R(){o&&o.remove(),o=null,r&&b("Layer").unsubscribe(r),r=null,q&&clearTimeout(q),q=null}function S(a){var c=L(a),d=M(a),e=N(a),f=b("DataStore").get(a,"flloc"),g=O(a),h=P(a),i=Q(a);b("FriendEditLists").init(l,c,f,d,e,g,h,i);b("CSS").conditionClass(l,"followButtonFlyout",b("CSS").hasClass(a,"profileFollowButton"));b("CSS").conditionClass(l,"friendButtonFlyout",b("CSS").hasClass(a,"FriendRequestFriends")||b("CSS").hasClass(a,"FriendRequestIncoming")||b("CSS").hasClass(a,"FriendRequestOutgoing"));b("CSS").conditionClass(l,"likeButtonFlyout",b("CSS").hasClass(a,"profileLikeButton"));c=b("DOMQuery").scry(l,"div.uiScrollableArea")[0];c&&b("ScrollableArea").poke(c);f=b("TabbableElements").find(l)[0];f&&f.focus()}function T(a){__p&&__p();if(!i||k)return;i.setContext(a);i.setCausalElement(a);a.setAttribute("aria-expanded","true");H(a)&&(b("CSS").addClass(a,"_52nd"),(b("CSS").hasClass(a,"uiButton")||b("CSS").matchesSelector(a,"._42fu"))&&b("CSS").addClass(a,"selected"));i.show();n=a;k=!0;var c=null;l?(c="show",S(a)):(c="init_show",new(b("AsyncRequest"))().setURI("/ajax/friends/lists/flyout_content.php").setStatusElement(i.getContent()).send());R();o=b("Event").listen(a,"mouseleave",W);r=b("Layer").subscribe("show",U);b("DataStore").get(a,"flfcloselistener")&&clearTimeout(b("DataStore").remove(a,"flfcloselistenertimeout"));var d=L(a);b("FriendStatus").getFriend(d,function(d){d.status==b("FriendStatus").ARE_FRIENDS&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/flyout_log.php").setData({target_id:L(a),unref:O(a),action:c}).send();if(!m)return;d.status==b("FriendStatus").OUTGOING_REQUEST?(b("CSS").show(m),b("AsyncRequest").bootstrap("/ajax/friends/lists/nux_flyout.php",null,!0)):b("CSS").hide(m)});(!j||a.id!==j.id)&&(b("Arbiter").inform("listeditor/close_editor"),b("Arbiter").inform("friend-list/close_editor"));j=a}function U(a,c){(!(c instanceof b("ContextualLayer"))||!b("DOMQuery").contains(n,c.getContext()))&&W()}function V(a){n=a,p=setTimeout(T.bind(null,a),u),o=b("Event").listen(a,"mouseleave",function(){clearTimeout(p),n=null,o&&o.remove()})}function W(){q=setTimeout(Y,150)}function X(){var a=b("ifRequired")("Dialog",function(a){return a});if(a){a=a.getCurrent();return a&&b("DOMQuery").scry(a,".friendListDialogTourCarousel")[0]}}function Y(){if(s||X())return;v=!1;if(i){i.hide();var a=i.getCausalElement();a&&a.setAttribute("aria-expanded","false")}}function Z(event){var a=b("Parent").byTag(event.getTarget(),"a");a&&b("CSS").hasClass(a,"FriendListActionItem")&&W()}function $(a){a=b("DataStore").remove(a,"flfcloselistener");a&&a()}e.exports=a.FriendListFlyoutController||x}),null);
__d("AddFriendButton",["Arbiter","AsyncRequest","AsyncResponse","CSS","DOMQuery","Event","FriendListFlyoutController","FriendStatus","Style","SubscribeButton","URI","XPubcontentChainedSuggestionsController","collectDataAttributes","ge","getVendorPrefixedName","goURI"],(function(a,b,c,d,e,f){__p&&__p();var g={ERROR_ALREADY_ADDED:1431005,init:function(a,c,d,e,f,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=a.id,s=null,t=b("DOMQuery").scry(a,".addButton")[0],u=b("DOMQuery").scry(a,".addFriendText")[0],v=b("DOMQuery").scry(a,".outgoingButton")[0],w=b("DOMQuery").scry(a,".incomingButton")[0],x=b("DOMQuery").scry(a,".friendButton")[0],y=b("DOMQuery").scry(a.parentNode.parentNode.parentNode,".friend_status_confirmed")[0],z=b("DOMQuery").scry(a.parentNode,".suggestFriendsButton")[0];function A(d,g,l){var q=new(b("URI"))(t.getAttribute("ajaxify")),r=b("collectDataAttributes")(a,["ft","gt"]);new(b("AsyncRequest"))().setURI(h).setData({to_friend:c,action:d,how_found:e,ref_param:f,link_data:r,outgoing_id:v.id,xids:q.getQueryData().xids,logging_location:i,no_flyout_on_click:j,ego_log_data:k,http_referer:m,floc:o,frefs:p}).setErrorHandler(g).setServerDialogCancelHandler(l).setRelativeTo(v).send();if(n&&d==="add_friend"){r=b("XPubcontentChainedSuggestionsController").getURIBuilder().setInt("friendid",c).getURI();new(b("AsyncRequest"))().setURI(r).send()}b("Arbiter").inform(b("SubscribeButton").SUBSCRIBED,{profile_id:c.toString(),connected:!0,chaining:!1})}function B(c,d){__p&&__p();u?b("CSS").hide(u):t&&(q&&b("CSS").hide(q),b("CSS").hide(t));v&&b("CSS").hide(v);w&&b("CSS").hide(w);x&&b("CSS").hide(x);c&&(b("CSS").show(c),q&&"Requestable"===d&&b("CSS").show(q));if("Outgoing"==d&&s!=d&&l){var e=b("getVendorPrefixedName")("transition"),f=b("Style").get(c,e),g={backgroundColor:"transparent",borderColor:b("Style").get(c,"borderLeftColor")};g[e]="2s";var h=b("Event").listen(c,b("getVendorPrefixedName")("transitionend"),function(){b("Style").apply(c,{transition_prop:f}),h.remove()});b("Style").apply(c,g)}"Requestable"==d&&s!=d&&(z&&b("CSS").hide(z));s&&b("CSS").removeClass(a,"fStatus"+s);s=d;b("CSS").addClass(a,"fStatus"+d)}function C(a){b("CSS").hasClass(a,"enableFriendListFlyout")?b("FriendListFlyoutController").show(a):b("FriendListFlyoutController").hide()}var D=b("Arbiter").subscribe("FriendRequest/change",function(a,d){G();if(d.uid!=c)return;switch(d.status){case b("FriendStatus").ARE_FRIENDS:return B(x,"Friends");case b("FriendStatus").INCOMING_REQUEST:return B(w,"Incoming");case b("FriendStatus").OUTGOING_REQUEST:return B(v,"Outgoing");case b("FriendStatus").CAN_REQUEST:y&&b("CSS").hide(y);return B(u?u:t,"Requestable")}}),E=b("Arbiter").subscribe("FriendRequest/unfriend",function(a,d){G(),d.uid===c&&d.shouldHideButton===!0&&b("CSS").hide(t)}),F;d&&(F=b("Arbiter").subscribe("FriendRequest/confirm",function(a,e){G(),e.uid==c&&b("goURI")(d)}));t&&b("Event").listen(t,"click",function(){b("Arbiter").inform("FriendRequest/sending",{uid:c}),j?b("FriendListFlyoutController").setActiveNode(v):C(v),A("add_friend",function(a){var d=a.error==g.ERROR_ALREADY_ADDED?"FriendRequest/sent":"FriendRequest/sendFail";b("Arbiter").inform(d,{uid:c});b("FriendListFlyoutController").hide();b("AsyncResponse").defaultErrorHandler(a)},function(a){b("Arbiter").inform("FriendRequest/sendFail",{uid:c}),b("FriendListFlyoutController").hide()})});function G(){if(b("ge")(r))return;D&&D.unsubscribe();F&&F.unsubscribe();E&&E.unsubscribe();D=null;F=null;E=null}}};e.exports=g}),null);
__d("FriendButtonIcon",["Arbiter","Button","FriendStatus"],(function(a,b,c,d,e,f){e.exports={register:function(a,c,d){b("Arbiter").subscribe("FriendListMembershipChange",function(e,f){if(f.uid==d){e=f.lists.includes(b("FriendStatus").CLOSE_FRIENDS);f=f.lists.includes(b("FriendStatus").ACQUAINTANCES);e&&!f?b("Button").setIcon(a,c.close):f&&!e?b("Button").setIcon(a,c.acquaintance):b("Button").setIcon(a,c.friend)}})}}}),null);
__d("FriendListMenu",["Arbiter","AsyncRequest","CSS","DOM","Event","Focus","HTML","Input","Keys","MenuDeprecated","Parent"],(function(a,b,c,d,e,f){__p&&__p();a={init:function(a){__p&&__p();b("MenuDeprecated").register(a,!1);var c=b("DOM").find(a,".FriendListCreateTrigger"),d=b("DOM").find(a,".CreateListInputItem"),e=b("DOM").find(d,".createListInput");b("MenuDeprecated").subscribe("select",function(d,f){f.item==c&&(b("CSS").addClass(a,"FriendListMenuCreate"),b("Focus").set(e))});b("Event").listen(e,"blur",function(c){b("Input").isEmpty(e)&&b("CSS").removeClass(a,"FriendListMenuCreate")});b("Event").listen(e,"keydown",function(c){b("Event").getKeyCode(c)==b("Keys").RETURN&&/[^\s]/.test(e.value)&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/create.php").setData({name:e.value,id:a.id}).setHandler(function(){b("Input").reset(e),b("CSS").removeClass(a,"FriendListMenuCreate")}).send()});b("Arbiter").subscribe("friend-list/new",function(d,e){d=b("HTML")(e.new_li).getRootNode();b("DOM").insertBefore(c,d);e.id===a.id?(b("MenuDeprecated").focusItem(d),b("MenuDeprecated").inform("select",{menu:b("Parent").byClass(d,"uiMenu"),item:d})):b("MenuDeprecated").toggleItem(d)});b("Arbiter").subscribe("friend-list/close_editor",function(){var c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsOpen");b("CSS").addClass(c,"addToListsClosed")})},addToAnotherList:function(a,c){b("Event").listen(a,"click",function(event){var c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsClosed");b("CSS").addClass(c,"addToListsOpen")})},goBack:function(a,c){b("Event").listen(a,"click",function(event){var c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsOpen");b("CSS").addClass(c,"addToListsClosed")})}};e.exports=a}),null);
__d("RestrictedFriendListEducation",["Arbiter","AsyncRequest"],(function(a,b,c,d,e,f){__p&&__p();var g,h;function i(a,c){if(c.flid==g)if(a=="FriendListHovercard/add"){if(h)return;h=!0;new(b("AsyncRequest"))().setURI("/ajax/friends/lists/restricted_edu.php").setData({target:c.uid,flid:c.flid}).send()}else a=="RestrictedListNUX/okay"&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/nux_log.php").setData(c).send();return!0}a={init:function(a){g=a,b("Arbiter").subscribe(["FriendListHovercard/add","RestrictedListNUX/okay"],i)}};e.exports=a}),null);
__d("XEgoHideLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:!0},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0},service_id:{type:"String",required:!0}})}),null);
__d("PymkXout",["Arbiter","AsyncSignal","CSS","DOM","DOMQuery","Event","PymkFunnelLogger","XEgoHideLoggingController"],(function(a,b,c,d,e,f){__p&&__p();a={init:function(a,c,d){b("Event").listen(c,"click",function(event){this._logForEgo(a);(d==="pymk_jewel"||d==="pymk_jewel_first_page"||d==="friends_center")&&this._logForPymkFunnel(a,d);d==="pymk_jewel"||d==="pymk_jewel_first_page"?b("CSS").hide(a):b("DOM").remove(a);b("Arbiter").inform("pymk-x-out",{location:d});var c=event.getTarget().getAttribute("data-pymk-id");c&&b("Arbiter").inform("x-out-ego-suggestions",{id:c})}.bind(this))},_logForEgo:function(a){a=a.getAttribute("data-ft");a=a==null?null:JSON.parse(a);if(a&&a.ego_id){a=b("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",a.ego_id).setInt("qid",a.qid).setInt("mf_story_key",a.mf_story_key).setString("service_id","PYMK").getURI();new(b("AsyncSignal"))(a,{}).send()}},_logForPymkFunnel:function(a,c){var d=b("DOMQuery").find(a,"input.friendBrowserID");d=parseInt(d.value,10);a=parseInt(a.getAttribute("data-signature"),10);b("PymkFunnelLogger").logXOut(d,a,c)}};e.exports=a}),null);