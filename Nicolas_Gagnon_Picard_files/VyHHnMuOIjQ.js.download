if (self.CavalryLogger) { CavalryLogger.start_js(["otxQd"]); }

__d("IntegrityContextTriggerGlimpseAnimator",["cx","CSS","OnVisible","Run","SubscriptionsHandler","ViewportBounds","getElementRect","getViewportDimensions","requestAnimationFrame"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="_3i0x",i="_3i0y",j=500,k={GLIMPSE_ANIM_ENABLED:"glimpse_anim_enabled",GLIMPSE_HAS_EVER_EXPANDED:"glimpse_has_ever_expanded",GLIMPSE_EXPAND_DELAY_MS:"glimpse_expand_delay_ms",GLIMPSE_CONTRACT_DELAY_MS:"glimpse_contract_delay_ms"};function l(a,c,d){__p&&__p();this.$1=a;this.$2=c;this.$3=d;this.$7=!1;a=this.destroy.bind(this);this.$4=new(b("SubscriptionsHandler"))();this.$4.addSubscriptions(b("Run").onLeave(a),b("Run").onUnload(a));this.$5=new(b("SubscriptionsHandler"))();this.$8();this.$6=new(b("SubscriptionsHandler"))()}l.prototype.getExtraDataForTriggerLogger=function(){var a={};a[k.GLIMPSE_ANIM_ENABLED]="1";var b=this.$7?"1":"0";a[k.GLIMPSE_HAS_EVER_EXPANDED]=b;a[k.GLIMPSE_EXPAND_DELAY_MS]=this.$2.toString();b=this.$3;b!==null&&b!==undefined&&(a[k.GLIMPSE_CONTRACT_DELAY_MS]=b.toString());return a};l.prototype.destroy=function(){this.$4.release(),this.$5.release(),this.$6.release()};l.prototype.$8=function(){this.$5.release();if(this.$7)return;this.$5.engage();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(new(b("OnVisible"))(this.$1,function(){a.release(),this.$9()}.bind(this),!0,0));this.$5.addSubscriptions({remove:function(){a.release()}})};l.prototype.$9=function(){this.$10()};l.prototype.$10=function(){var a=new(b("SubscriptionsHandler"))(),c=setTimeout(function(){a.release(),this.$11(),this.$12()}.bind(this),this.$2);a.addSubscriptions({remove:function(){clearTimeout(c)}});a.addSubscriptions(new(b("OnVisible"))(this.$1,function(){a.release(),this.$8()}.bind(this),!0,0,!0));this.$5.addSubscriptions({remove:function(){a.release()}})};l.prototype.$13=function(){var a=b("ViewportBounds").getTop(),c=b("getViewportDimensions")().height,d=b("getElementRect")(this.$1);return d.bottom-d.top>0&&d.bottom>=a&&d.top<=c};l.prototype.$12=function(){if(this.$3==null)return;var a=new(b("SubscriptionsHandler"))(),c=setTimeout(function(){a.release(),this.$13()?this.$14():this.$15()}.bind(this),this.$3);a.addSubscriptions({remove:function(){clearTimeout(c)}});this.$5.addSubscriptions({remove:function(){a.release()}})};l.prototype.$11=function(){this.$16(!0,!0)};l.prototype.$14=function(){this.$16(!1,!0)};l.prototype.$15=function(){this.$16(!1,!1)};l.prototype.$16=function(a,c){__p&&__p();this.$7=this.$7||a;this.$6.release();this.$6.engage();b("CSS").conditionClass(this.$1,h,c);var d=b("requestAnimationFrame")(function(){b("CSS").conditionClass(this.$1,i,a);if(!c)return;var d=setTimeout(function(){this.$6.release(),b("CSS").removeClass(this.$1,h)}.bind(this),j);this.$6.addSubscriptions({remove:function(){clearTimeout(d)}})}.bind(this));this.$6.addSubscriptions({remove:function(){cancelAnimationFrame(d)}})};function a(a){var b=a.triggerRootElem;a=a.glimpseConfig;if(!b||!a)return null;var c=a.expandDelayMs;a=a.contractDelayMs;return c==null?null:new l(b,c,a)}e.exports={initAnim:a}}),null);
__d("MessageReplyEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SWIPE:"swipe",LONG_PRESS:"long_press",MESSENGER_UI_HOVER_BUTTON:"messenger_ui_hover_button",THREE_DOT_BUTTON:"three_dot_button"})}),null);